---
title: learn - 软件设计原则与模式
date: 2024-08-10 12:00:00 +0800
categories: []
tags: []
author: wangfuyu
math: true 
img_path: /static/image/
---

## 应当知道的

### 设计模式与设计原则

#### 设计原则

- 单一职责原则（Single Responsibility Principle, SRP）
  > 一个类应该只负责一个功能，**降低类的复杂度**，
  > 提高类的**可读性和可维护性**，**减少变更带来的风险‌**。
  > ```go
  > // userDAO user Data Access Object
  > type userDAO struct {}
  > 
  > func (*userDAO) GetOne(data *model.User) (*model.User, error) {}
  > func (*userDAO) Insert(data *model.User) (*model.User, error) {}
  > ```
  > 例如上述的单独的对`user`对象进行数据库的读和写的交互，
  > 不存在其他业务干涉。

- 里氏替换原则（Liskov Substitution Principle, LSP）
  > 子类可以扩展父类的行为，但不能改变父类的行为，
  > 保证父类与子类之间的基本契约关系不受破坏‌。

- 依赖倒置原则（Dependency Inversion Principle, DIP）
  > 高层模块不应该依赖低层模块，二者都应该依赖于抽象；
  > 抽象不应该依赖于细节，细节应该依赖于抽象‌。

- 接口隔离原则（Interface Segregation Principle, ISP）
  > 客户端不应该依赖与它不需要的接口，
  > 一个类对另一个类的依赖应该建立在最小接口上‌。

- 迪米特法则（Law of Demeter, LoD）‌
  > 一个对象应该对其他对象有尽可能少的了解，
  > 即一个对象对另一个对象知道的越少越好‌。

- 开闭原则（开放封闭原则）（Open-Closed Principle, OCP）
  > 软件实体应对扩展开放，对修改关闭，
  > 即在不修改现有代码的基础上增加新的功能‌。

- 合成、聚合、复用原则（Composition/Aggregation Reuse Principle, CARP）
  > 尽量使用对象的组合/聚合来达到复用的目的，
  > 而不是通过继承关系达到复用的目的‌。
  > ```yaml
  > ——user
  >   |——assemble     // 聚合user、user_ext、user_group功能，对外复用
  >   |——def
  >   |——internal
  >      |——dal
  >      └──dml
  >   |——user.go  // 合成复用dml中对user单一职责访问操作的结果 
  >   |——user_ext.go
  >   └──user_group.go
  >
  > ```
