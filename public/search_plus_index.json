{"./":{"url":"./","title":"首页","keywords":"","body":"blog.360club.net 2021 New starting point 序言 为什么要写博客？ 1）大家都在写，那我也跟着写一些啦~【有见地，一针见血，任意场合都可以，写好了不骄傲，写差了有台阶下】 2）有些东西想那笔和本去记下来，发现不好查找，更不好去分享出去，在网络上记录下发现确实方便的多，有网络的地方就能看，更重要一点是省钱去笔和本了~【像一个学生的态度，课堂笔记越积越厚，至于有没有成功，这条路至少尝试了】 3）想成为一个大作家~【有志向，有抱负】 网上有句诗写的挺好的： > 初闻不知曲中意，再闻已是曲中人。既然已是曲中人，何必再听曲中曲。曲中轻忆梦中人，梦醒时分叹红尘。曲终人散梦已醒，何处再寻梦中人。梦中合唱凤求凰，梦醒独奏离别赋。即知曲人存于梦，何故执于曲外人。多少痴梦多少等，难诉痴情曲中人。一萧一页红尘事，一弦一曲了人生。既然已是曲中人，何必再悟曲中意..... 关于 主页地址：http://blog.360club.net作者： wangfuyu联系作者： 936466975@qq.com 本站内容，均可借鉴使用（即使您完全拷贝过去了我也不说什么），若出现法律风险，与作者无关。若有哪句话冒犯了各位（如指名道姓张三李四王五赵六），联系作者进行删除。 豫ICP备15006703号-2  all right reserved，powered by Gitbook当前文章修订时间： 2021-01-14 21:52:39 "},"article/article.html":{"url":"article/article.html","title":"非技术类","keywords":"","body":"article 日记 豫ICP备15006703号-2  all right reserved，powered by Gitbook当前文章修订时间： 2021-01-14 21:52:39 "},"linux/linux.html":{"url":"linux/linux.html","title":"linux","keywords":"","body":"服务器相关 豫ICP备15006703号-2  all right reserved，powered by Gitbook当前文章修订时间： 2021-01-13 22:31:57 "},"linux/linux01.html":{"url":"linux/linux01.html","title":"旧笔记本做个人服务器01","keywords":"","body":"旧笔记本做个人服务器 安装 首先需要安装一个系统旧笔记本配置比较低，联想昭阳E49L （双核，升级内存后4G,加固态ssd和光驱托架扩展磁盘）首先安装linux系统，因为U盘安装对BIOS设置不熟悉，找到restart的load default才找到识别的usb启动。安装后连接网络，对旧软件进行更新，因为有些服务类软件依赖版本关系，新版本大部分都支持。 yum update -y 合上盖子不休眠systemd 处理某些电源相关的 ACPI事件，可以通过从 /etc/system/logind.conf以下选项进行配置： HandlePowerKey按下电源键后的行为，默认power off HandleSleepKey 按下挂起键后的行为，默认suspend HandleHibernateKey 按下休眠键后的行为，默认hibernate HandleLidSwitch 合上笔记本盖后的行为，默认suspend 触发的行为可以有 ignore、power off、reboot、halt、suspend、hibernate、hybrid-sleep、lock 或 exec。 如果要合盖不休眠只需要把HandleLidSwitch选项设置为如下即可：HandleLidSwitch=lock注意：设置完成保存后运行下列命令才生效。 systemctl restart systemd-logind 关掉防火墙 因为个人用的服务器，不需要每次安装一个软件对端口开放一次，所以个人用的，干脆直接关掉防火墙吧, centos来说 查看防火墙状态~]# service iptables status 停止防火墙 ~]# service iptables stop 启动防火墙 ~]# service iptables start 重启防火墙 ~]# service iptables restart 永久关闭防火墙 ~]# chkconfig iptables off 永久关闭后重启 ~]# chkconfig iptables on　 开启80端口 vim /etc/sysconfig/iptables # 加入如下代码 -A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT 我安装的是fodera,没有安装iptables，以下方式可选 查看firewall服务状态~]# systemctl status firewalld 开启firewall服务~]# service firewalld start 关闭firewall服务~]# service firewalld stop 查询端口是否开放~]# firewall-cmd --query-port=8080/tcp 开放80端口~]# firewall-cmd --permanent --add-port=80/tcp 移除端口~]# firewall-cmd --permanent --remove-port=8080/tcp 停止firewall ~]# systemctl stop firewalld.service 禁止firewall开机启动~]# systemctl disable firewalld.service 安装iptables防火墙 ~]# yum install iptables-services 安装了iptable就可以使用上面iptables的几种命令了 重启防火墙使配置生效 ~]# systemctl restart iptables.service 设置防火墙开机启动 ~]# systemctl enable iptables.service 不管怎么着，反正是在笔记本上安装了个linux，接下来要做什么呢？docker?嗯，好主意，那就安装上docker吧。参考docker官网教程就行，命令复制粘贴，网络好的话分分钟搞定。端口映射？内网穿透？说吧，你还想怎么折腾舍不得扔掉的笔记本。。那后续我再把我实现了的方案给你们都透露下。 部署web 安装个openresty就行 安装上git,node,gitbook，能编写，能提交已经很好了 豫ICP备15006703号-2  all right reserved，powered by Gitbook当前文章修订时间： 2021-01-14 21:52:39 "},"linux/gitbook.html":{"url":"linux/gitbook.html","title":"gitbook","keywords":"","body":"gitbook 安装 windows安装 linux安装 使用 gitbook init gitbook install gitbook build 项目位置 生成位置 部署web 静态部署 端口映射 豫ICP备15006703号-2  all right reserved，powered by Gitbook当前文章修订时间： 2021-01-13 22:31:57 "},"linux/nfs.html":{"url":"linux/nfs.html","title":"NFS共享","keywords":"","body":"NFS共享（linux与linux之间共享文件夹） 服务端和客户端安装 NFS server需要至少安装两个软件nfs-utils 和rpcbind。客户端只要安装rpcbind。 rpm -qa nfs-utils rpcbind 安装完nfs服务一般会自动生成配置文件exports，如果没有就自己创建一个 /etc/exports yum install -y nfs-utils rpcbind cat /etc/exports 创建共享目录,将文件所有者指定为nfsnobody。nfsnobody用户在安装nfs时会自动创建 如果不指定共享用户，则nfs系统在分配权限时会以用户uid为主，客户端如果用root账户会在服务器被自动降级至nfsnobody。 mkdir -p /data/nfs chown -R nfsnobody:nfsnobody /data/nfs` 豫ICP备15006703号-2  all right reserved，powered by Gitbook当前文章修订时间： 2021-01-14 21:52:39 "},"linux/pptp.html":{"url":"linux/pptp.html","title":"pptp-vpn","keywords":"","body":"pptp服务搭建 安装服务端 配置PPTP 需要使用 TCP 1723 通信端口 telent xx.xx.xx.xx 1723 软件配置 安装ppp和pptpd yum -y install ppp pptpd 配置相关参数 配置pptpd 1.1.运行 vim /etc/pptpd.conf 编辑配置文件，删除下列两行命令符前面的 # ，保存后退出 localip 192.168.0.1 remoteip 192.168.0.234-238,192.168.0.245 1.2.运行 vi /etc/ppp/options.pptpd 编辑配置文件，删除下列两行命令符前面的 #，并写入当地DNS,我用华为云的dns，保存后退出 ​ ms-dns 100.125.1.250 ​ ms-dns 100.125.129.250 1.3.运行 vi /etc/ppp/chap-secrets 配置VPN账号和密码 ​ username pptpd password ​ #格式 ​ #username为拨号时的用户名 ​ #pptpd为pptpd服务​ #password为拨号时的密码 ​ #为任意分配IP地址 1.4.运行 vi /etc/ppp/ip-up 设置最大传输单元 MTU ​ 在命令符 [ -x /etc/ppp/ip-up.local ] && /etc/ppp/ip-up.local “$@” 后面添加 ifconfig ppp0 mtu 1472 开启服务器内核转发 1.运行 vi /etc/sysctl.conf 编辑配置文件，添加 net.ipv4.ip_forward = 1 的配置，保存后退出。 2.运行 sysctl -p 使修改后的参数生效。 防火墙规则(可选，如果关闭了防火墙) 1.运行 iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -j MASQUERADE 开启 iptables 转发规则 2.运行 vi /etc/sysconfig/iptables 配置iptables规则 nat表里面添加: #-s 后面是pptpd.conf里面localip那个网段 #-o 后面是外网网卡设备名 #–to-source 后面是外网网卡地址 -A POSTROUTING -s 192.168.2.0/24 -o eth2 -j SNAT –to-source 192.168.1.42 filter表里面配置： #pptpd的端口是1723 -A INPUT -p tcp -m state –state NEW -m tcp –dport 1723 -j ACCEPT #pptp协议需要放开gre协议 -A INPUT -p gre -j ACCEPT #修改mss为1356，-s后面是pptp客户端地址段，以免有些网站上不去 -A FORWARD -p tcp –syn -s 192.168.2.0/24 -j TCPMSS –set-mss 1356 #注释掉下面这个选项，vpn服务器就可以转发数据包，需要转发链默认规则是允许 #-A FORWARD -j REJECT –reject-with icmp-host-prohibited 3.保存、重启iptables ​ service iptables save ​ service iptables restart 解决周期自动断开情况 运行vim /etc/ppp/options.xl2tpd ，录入内容 lock lcp-echo-interval 0 lcp-echo-failure 0 重启服务 1.重启PPTP服务：systemctl restart pptpd 2.如果本机也修改了防火墙端口。重启iptables：systemctl restart iptables 3.配置开机自启 ​ systemctl enable pptpd.service ​ systemctl enable iptables.service 使用 Windows 访问VPN 1.打开 网络和共享中心 2.选择 设置新的连接或网络 --> 连接到工作区 --> 使用我的Internet连接(VPN) 3.Internet地址 填入服务器ip 4.输入上面配置的用户名和密码，连接即可 centos登录VPN centos 7 命令行下可使用pptpsetup进行pptp拨号，首先安装ppp，pptp和pptp-setup三个包，使用pptpsetup进行连接 yum install ppp pptp pptp-setup -y 使用pptpsetup进行连接 命令：pptpsetup --createVPN名字 --server VPNip --username username --password password --encrypt --start pptpsetup --create vpn --server xxxx --username xxxx --password xxxx --encrypt --start 有以下提示即为成功: Connect: ppp0 /dev/pts/1 CHAP authentication succeeded MPPE 128-bit stateless compression enabled local IP address 192.168.160.13 remote IP address 192.168.160.1 查看是否成功 使用ifconfig命令，可以看到会多了一个ppp0网口 然后ping服务器的ip会成功（远程开启了icmp） 添加默认路由（可以不执行） route add default dev ppp0 断开连接 pkill pptp 可能的问题 # pptpsetup --create vpn --server xxxx --username xxxx --password xxxx --encrypt --start Using interface ppp0 Connect: ppp0 /dev/pts/1 EAP: unknown authentication type 26; Naking EAP: peer reports authentication failure Connection terminated. 解决方法： # vim /etc/ppp/options refuse-pap refuse-eap refuse-chap refuse-mschap require-mppe 豫ICP备15006703号-2  all right reserved，powered by Gitbook当前文章修订时间： 2021-01-13 22:31:57 "},"linux/subversion.html":{"url":"linux/subversion.html","title":"svn","keywords":"","body":"subversion 安装 配置仓库 svnadmin create 仓库位置 结合apache进行端口转发访问 vim /etc/httpd/conf.d/subversion.conf DAV svn SVNPath /rain_data/svn/svnrepos/unicorn SVNListParentPath on AuthType Basic AuthName \"wangfuyu svn server\" AuthUserFile /rain_data/svn/unicorn_users.conf #AuthUserFile /rain_data/svn/svnrepos/rain/conf/passwd Require valid-user AuthzSVNAccessFile /rain_data/svn/unicorn_access.conf #AuthzSVNAccessFile /rain_data/svn/svnrepos/rain/conf/authz service httpd restart 使用 豫ICP备15006703号-2  all right reserved，powered by Gitbook当前文章修订时间： 2021-01-13 22:31:57 "},"linux/frp.html":{"url":"linux/frp.html","title":"内网穿透工具-frp","keywords":"","body":"内网穿透工具-frp 什么是内网穿透 内网穿透说直白了也就是说用告诉外界如何用一个大家都能访问的ip访问到局域网内的电脑。至于是怎么得到一个大家都能访问的ip(公网ip)，对于普通搬砖工来说也就是购买一台最最便宜的服务器即可，如果是家庭网络拨号分配的是动态公网ip，那么恭喜你，本次就不用看往下看了，一般路由器都带端口映射。 内网穿透工具据我知道的有ngrok、frp、Earthworm、sSocks、花生壳等。 frp 参考官网地址：https://gofrp.org/ frp 是一个专注于内网穿透的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议。可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网。 如果官网打不开（可能是自己网络受限，访问不了那么多地址^_^）,可以从github下载二进制文件使用，下载地址 https://github.com/fatedier/frp/releases 简单例子 只要能区分开里面文件名的服务端server(frps)和客户端client(frpc)就行,你看人家多人性化，把最后一个字母就标明了是server还是client。 server 启动服务:先下载到任意目录后，进入目录./frps -c ./frps.ini cat frps.ini [common] bind_port = 10086 vhost_http_port = 10010 没跟你们的端口重复吧（(^o^)/~），哟吼！这么巧呀！ client 链接服务：先下载到任意目录后，进入目录./frpc -c ./frpc.ini cat frpc.ini [common] server_addr = 120.244.130.251 server_port = 10086 [ssh] type = tcp local_ip = 192.168.1.7 local_port = 22 remote_port = 6000 [pan] type = http local_port = 8091 custom_domains = blog.360club.net [console] type = http local_port = 9000 custom_domains = 360club.picp.net 这下没重复了？我故意写错了ip地址能直接跑起来才怪，还有口令认证呢（省略了）。 访问测试 在server上配置nginx或者openrestry，其实都是配置nginx作为代理用。配置nginx.conf文件 server { listen 443; server_name blog.360club.net; access_log /rain_data/log/nginx/360club_access.log; error_log /rain_data/log/nginx/360club_error.log; location / { proxy_set_header X-Real-IP $remote_addr; proxy_http_version 1.1; proxy_set_header Host $host; proxy_set_header Connection \"keep-alive\"; proxy_pass http://120.244.130.251:10010$request_uri; } } server { listen 80; server_name 360club.picp.net; access_log /rain_data/log/nginx/360club_access.log; error_log /rain_data/log/nginx/360club_error.log; set $web_root /rain_data/source/online/360club/public; location / { proxy_set_header X-Real-IP $remote_addr; proxy_http_version 1.1; proxy_set_header Host $host; proxy_set_header Connection \"keep-alive\"; proxy_pass http://120.244.130.251:10010$request_uri; } } 直接访问这两个地址 http://360club.picp.net/ 、https://blog.360club.net 作为本地服务运行 cat /etc/systemd/system/frpc.service 或者 cat /usr/lib/systemd/system/frpc.service (我的是Fedora release 27) [Unit] Description=frpc After=multi-user.targe [Service] Type=simple TimeoutStartSec=30 ExecStart=/data/soft/frp/frpc -c /data/soft/frp/frpc.ini #启动命令根据自己情况填写目录 Restart= always RestartSec=1min ExecStop=/bin/kill $MAINPID [Install] WantedBy=multi-user.target systemctl start frpc.service 手动运行 systemctl enable frpc.service 开机启动 systemctl stop frpc.service 结束 可以把个人博客放到家里电脑上，也可以搭建个开源的网盘，以后回去写东西也不用拷贝到U盘了（比如一些没写完的word和ppt）,还能干什么呢？反正我不说了，留给你们发挥。 豫ICP备15006703号-2  all right reserved，powered by Gitbook当前文章修订时间： 2021-01-14 21:52:39 "}}