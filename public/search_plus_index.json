{"./":{"url":"./","title":"首页","keywords":"","body":"blog.360club.net 2021 New starting point 简述 你看到的不一定是实事 声明 主页地址：http://blog.360club.net作者： wangfuyu联系作者： 936466975@qq.com 本站内容，均可借鉴使用，若出现法律风险，与作者无关 豫ICP备15006703号-2 all right reserved，powered by Gitbook当前文章修订时间： 2021-01-13 22:31:57 "},"linux/gitbook.html":{"url":"linux/gitbook.html","title":"gitbook","keywords":"","body":"gitbook 安装 windows安装 linux安装 使用 gitbook init gitbook install gitbook build 项目位置 生成位置 部署web 静态部署 端口映射 豫ICP备15006703号-2 all right reserved，powered by Gitbook当前文章修订时间： 2021-01-13 22:31:57 "},"linux/linux01.html":{"url":"linux/linux01.html","title":"旧笔记本做个人服务器01","keywords":"","body":"旧笔记本做个人服务器 安装 首先需要安装一个系统 旧笔记本配置比较低，联想昭阳E49L 首先安装linux系统，因为U盘安装对BIOS设置不熟悉，找到restart的load default才找到识别的usb启动。 安装后连接网络，对旧软件进行更新，因为有些服务类软件依赖版本关系，新版本大部分都支持。yum update -y 合上盖子不休眠 systemd 处理某些电源相关的 ACPI事件，可以通过从 /etc/system/logind.conf以下选项进行配置： HandlePowerKey按下电源键后的行为，默认power off HandleSleepKey 按下挂起键后的行为，默认suspend HandleHibernateKey 按下休眠键后的行为，默认hibernate HandleLidSwitch 合上笔记本盖后的行为，默认suspend 触发的行为可以有 ignore、power off、reboot、halt、suspend、hibernate、hybrid-sleep、lock 或 exec。 如果要合盖不休眠只需要把HandleLidSwitch选项设置为如下即可： HandleLidSwitch=lock 注意：设置完成保存后运行下列命令才生效。 systemctl restart systemd-logind 关掉防火墙 因为个人用的服务器，不需要每次安装一个软件对端口开放一次，所以个人用的，干脆直接关掉防火墙吧, centos来说 查看防火墙状态~]# service iptables status 停止防火墙 ~]# service iptables stop 启动防火墙 ~]# service iptables start 重启防火墙 ~]# service iptables restart 永久关闭防火墙 ~]# chkconfig iptables off 永久关闭后重启 ~]# chkconfig iptables on　 开启80端口 vim /etc/sysconfig/iptables # 加入如下代码 -A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT 我安装的是fodera,没有安装iptables，以下方式可选 查看firewall服务状态~]# systemctl status firewalld 开启firewall服务~]# service firewalld start 关闭firewall服务~]# service firewalld stop 查询端口是否开放~]# firewall-cmd --query-port=8080/tcp 开放80端口~]# firewall-cmd --permanent --add-port=80/tcp 移除端口~]# firewall-cmd --permanent --remove-port=8080/tcp 停止firewall ~]# systemctl stop firewalld.service 禁止firewall开机启动~]# systemctl disable firewalld.service 安装iptables防火墙 ~]# yum install iptables-services 安装了iptable就可以使用上面iptables的几种命令了 重启防火墙使配置生效 ~]# systemctl restart iptables.service 设置防火墙开机启动 ~]# systemctl enable iptables.service 使用 gitbook init gitbook install gitbook build 项目位置 生成位置 部署web 静态部署 端口映射 豫ICP备15006703号-2 all right reserved，powered by Gitbook当前文章修订时间： 2021-01-13 22:31:57 "},"linux/nfs.html":{"url":"linux/nfs.html","title":"NFS共享","keywords":"","body":"NFS共享（linux与linux之间共享文件夹） 服务端和客户端安装 NFS server需要至少安装两个软件nfs-utils 和rpcbind。客户端只要安装rpcbind。 rpm -qa nfs-utils rpcbind 安装完nfs服务一般会自动生成配置文件exports，如果没有就自己创建一个 /etc/exports yum install -y nfs-utils rpcbind cat /etc/exports 创建共享目录,将文件所有者指定为nfsnobody。nfsnobody用户在安装nfs时会自动创建 如果不指定共享用户，则nfs系统在分配权限时会以用户uid为主，客户端如果用root账户会在服务器被自动降级至nfsnobody。 mkdir -p /data/nfs chown -R nfsnobody:nfsnobody /data/nfs` server配置文件 gitbook init gitbook install gitbook build 项目位置 生成位置 部署web 静态部署 端口映射 豫ICP备15006703号-2 all right reserved，powered by Gitbook当前文章修订时间： 2021-01-13 22:31:57 "},"linux/pptp.html":{"url":"linux/pptp.html","title":"pptp-vpn","keywords":"","body":"pptp服务搭建 安装服务端 配置PPTP 需要使用 TCP 1723 通信端口 telent xx.xx.xx.xx 1723 软件配置 安装ppp和pptpd yum -y install ppp pptpd 配置相关参数 配置pptpd 1.1.运行 vim /etc/pptpd.conf 编辑配置文件，删除下列两行命令符前面的 # ，保存后退出 localip 192.168.0.1 remoteip 192.168.0.234-238,192.168.0.245 1.2.运行 vi /etc/ppp/options.pptpd 编辑配置文件，删除下列两行命令符前面的 #，并写入当地DNS,我用华为云的dns，保存后退出 ​ ms-dns 100.125.1.250 ​ ms-dns 100.125.129.250 1.3.运行 vi /etc/ppp/chap-secrets 配置VPN账号和密码 ​ username pptpd password ​ #格式 ​ #username为拨号时的用户名 ​ #pptpd为pptpd服务​ #password为拨号时的密码 ​ #为任意分配IP地址 1.4.运行 vi /etc/ppp/ip-up 设置最大传输单元 MTU ​ 在命令符 [ -x /etc/ppp/ip-up.local ] && /etc/ppp/ip-up.local “$@” 后面添加 ifconfig ppp0 mtu 1472 开启服务器内核转发 1.运行 vi /etc/sysctl.conf 编辑配置文件，添加 net.ipv4.ip_forward = 1 的配置，保存后退出。 2.运行 sysctl -p 使修改后的参数生效。 防火墙规则(可选，如果关闭了防火墙) 1.运行 iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -j MASQUERADE 开启 iptables 转发规则 2.运行 vi /etc/sysconfig/iptables 配置iptables规则 nat表里面添加: #-s 后面是pptpd.conf里面localip那个网段 #-o 后面是外网网卡设备名 #–to-source 后面是外网网卡地址 -A POSTROUTING -s 192.168.2.0/24 -o eth2 -j SNAT –to-source 192.168.1.42 filter表里面配置： #pptpd的端口是1723 -A INPUT -p tcp -m state –state NEW -m tcp –dport 1723 -j ACCEPT #pptp协议需要放开gre协议 -A INPUT -p gre -j ACCEPT #修改mss为1356，-s后面是pptp客户端地址段，以免有些网站上不去 -A FORWARD -p tcp –syn -s 192.168.2.0/24 -j TCPMSS –set-mss 1356 #注释掉下面这个选项，vpn服务器就可以转发数据包，需要转发链默认规则是允许 #-A FORWARD -j REJECT –reject-with icmp-host-prohibited 3.保存、重启iptables ​ service iptables save ​ service iptables restart 解决周期自动断开情况 运行vim /etc/ppp/options.xl2tpd ，录入内容 lock lcp-echo-interval 0 lcp-echo-failure 0 重启服务 1.重启PPTP服务：systemctl restart pptpd 2.如果本机也修改了防火墙端口。重启iptables：systemctl restart iptables 3.配置开机自启 ​ systemctl enable pptpd.service ​ systemctl enable iptables.service 使用 Windows 访问VPN 1.打开 网络和共享中心 2.选择 设置新的连接或网络 --> 连接到工作区 --> 使用我的Internet连接(VPN) 3.Internet地址 填入服务器ip 4.输入上面配置的用户名和密码，连接即可 centos登录VPN centos 7 命令行下可使用pptpsetup进行pptp拨号，首先安装ppp，pptp和pptp-setup三个包，使用pptpsetup进行连接 yum install ppp pptp pptp-setup -y 使用pptpsetup进行连接 命令：pptpsetup --createVPN名字 --server VPNip --username username --password password --encrypt --start pptpsetup --create vpn --server xxxx --username xxxx --password xxxx --encrypt --start 有以下提示即为成功: Connect: ppp0 /dev/pts/1 CHAP authentication succeeded MPPE 128-bit stateless compression enabled local IP address 192.168.160.13 remote IP address 192.168.160.1 查看是否成功 使用ifconfig命令，可以看到会多了一个ppp0网口 然后ping服务器的ip会成功（远程开启了icmp） 添加默认路由（可以不执行） route add default dev ppp0 断开连接 pkill pptp 可能的问题 # pptpsetup --create vpn --server xxxx --username xxxx --password xxxx --encrypt --start Using interface ppp0 Connect: ppp0 /dev/pts/1 EAP: unknown authentication type 26; Naking EAP: peer reports authentication failure Connection terminated. 解决方法： # vim /etc/ppp/options refuse-pap refuse-eap refuse-chap refuse-mschap require-mppe 豫ICP备15006703号-2 all right reserved，powered by Gitbook当前文章修订时间： 2021-01-13 22:31:57 "}}